{"version":3,"file":"lazy-image-loader.js","sourceRoot":"","sources":["../src/lib/lazy-image-loader.ts"],"names":[],"mappings":"AAAA,OAAO,EAAC,OAAO,EAAC,MAAM,aAAa,CAAC;AAEpC,MAAM,QAAQ,GAAG,CAAC,OAAyB,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE,EAAE,IAAI,CAAC,gBAAgB,CAAC,aAAa,CAAC,CAAC,CAAC;AAClH,MAAM,UAAU,GAAG,CAAC,EAAW,EAAE,EAAE;IACjC,MAAM,KAAK,GAAG,CAAC,EAAE,CAAC,YAAY,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC;IACvE,OAAO,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,SAAS,CAAC,CAAC;AAC/E,CAAC,CAAC;AACF,MAAM,SAAS,GAAG,GAAG,EAAE,CAAC,QAAQ,CAAC,UAAU,KAAK,SAAS,CAAC;AAC1D,MAAM,QAAQ,GAAG,CAAC,EAAsC,EAAE,EAAE,CAAC,QAAQ,CAAC,gBAAgB,CAAC,kBAAkB,EAAE,EAAE,EAAE,EAAC,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAC,CAAC,CAAC;AAC5I,MAAM,SAAS,GAAG,CAAC,OAAgB,EAAE,EAAE,CAAC,OAAO,CAAC,OAAO,EAAE,UAAU,CAAC,OAAO,CAAC,CAAC,CAAC;AAE9E,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,EAAE,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,QAAQ,EAAE,CAAC,OAAO,CAAC,CAAC,EAAW,EAAE,EAAE,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC","sourcesContent":["import {observe} from './lazy-data';\n\nconst elements = (root: Document|Element = document) => [].concat.apply([], root.querySelectorAll('[data-lazy]'));\nconst attributes = (el: Element) => {\n  const match = (el.getAttribute('data-lazy') || '').match(/^\\[(.*)\\]$/);\n  return match ? match[1].split(',').map((i) => i.trim()) : ['src', 'src-set'];\n};\nconst isLoading = () => document.readyState === 'loading';\nconst onLoaded = (cb: EventListenerOrEventListenerObject) => document.addEventListener('DOMContentLoaded', cb, {passive: true, once: true});\nconst doObserve = (element: Element) => observe(element, attributes(element));\n\nnew Promise((resolve) => isLoading() ? onLoaded(resolve) : resolve()).then(() => elements().forEach((el: Element) => doObserve(el)));\n"]}