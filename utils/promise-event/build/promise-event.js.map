{"version":3,"file":"promise-event.js","sourceRoot":"","sources":["../src/build/promise-event.ts"],"names":[],"mappings":"AAIA;;;;;;;GAOG;AACH,MAAM,UAAU,YAAY,CAC3B,EAAW,EACX,IAAc,EACd,EAAoC;IAEpC,MAAM,QAAQ,GAAG,CAAC,OAAa,EAAE,MAAY,EAAE,EAAE;QAC/C,OAAO;YACL,WAAW,EAAE,UAAU,GAAM;gBAC3B,IAAI;oBACF,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC,EAAE,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,CAAC;iBACvC;gBAAC,OAAO,KAAK,EAAE;oBACd,MAAM,CAAC,KAAK,CAAC,CAAC;iBACf;wBAAS;oBACR,EAAE,CAAC,mBAAmB,CAAC,IAAI,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;iBAC3C;YACH,CAAC;SACF,CAAC;IACJ,CAAC,CAAC;IACF,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE;QACrC,EAAE,CAAC,gBAAgB,CAAC,IAAI,EAAE,QAAQ,CAAC,OAAO,EAAE,MAAM,CAAC,EAAE,KAAK,CAAC,CAAC;IAC9D,CAAC,CAAC,CAAC;AACJ,CAAC;AAED,eAAe,YAAY,CAAC","sourcesContent":["export interface PromisedElementEventCallback<E extends Event> {\n (element: Element, event?: E): any;\n}\n\n/**\n * Awaits an event to happen.\n * When event is triggered, callback is called and removes listner. \n * @param el Element to await event from\n * @param type Type of event to await\n * @param cb Callback when event fired\n * @returns {Promise}\n */\nexport function promiseEvent<T extends keyof ElementEventMap, E extends Event>(\n el: Element,\n type: T|string,\n cb?: PromisedElementEventCallback<E>,\n): Promise<any> {\n const resolver = (resolve?: any, reject?: any) => {\n   return {\n     handleEvent: function (evt: E) {\n       try {\n         cb ? resolve(cb(el, evt)) : resolve();\n       } catch (error) {\n         reject(error);\n       } finally {\n         el.removeEventListener(type, this, false);\n       }\n     }\n   };\n };\n return new Promise((resolve, reject) => {\n   el.addEventListener(type, resolver(resolve, reject), false);\n });\n}\n\nexport default promiseEvent;\n"]}